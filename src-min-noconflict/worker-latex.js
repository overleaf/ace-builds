"no use strict";!function(e){function t(e,t){var n=e,r="";while(n){var i=t[n];if(typeof i=="string")return i+r;if(i)return i.location.replace(/\/*$/,"/")+(r||i.main||i.name);if(i===!1)return"";var s=n.lastIndexOf("/");if(s===-1)break;r=n.substr(s)+r,n=n.slice(0,s)}return e}if(typeof e.window!="undefined"&&e.document)return;if(e.require&&e.define)return;e.console||(e.console=function(){var e=Array.prototype.slice.call(arguments,0);postMessage({type:"log",data:e})},e.console.error=e.console.warn=e.console.log=e.console.trace=e.console),e.window=e,e.ace=e,e.onerror=function(e,t,n,r,i){postMessage({type:"error",data:{message:e,data:i.data,file:t,line:n,col:r,stack:i.stack}})},e.normalizeModule=function(t,n){if(n.indexOf("!")!==-1){var r=n.split("!");return e.normalizeModule(t,r[0])+"!"+e.normalizeModule(t,r[1])}if(n.charAt(0)=="."){var i=t.split("/").slice(0,-1).join("/");n=(i?i+"/":"")+n;while(n.indexOf(".")!==-1&&s!=n){var s=n;n=n.replace(/^\.\//,"").replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return n},e.require=function(r,i){i||(i=r,r=null);if(!i.charAt)throw new Error("worker.js require() accepts only (parentId, id) as arguments");i=e.normalizeModule(r,i);var s=e.require.modules[i];if(s)return s.initialized||(s.initialized=!0,s.exports=s.factory().exports),s.exports;if(!e.require.tlns)return console.log("unable to load "+i);var o=t(i,e.require.tlns);return o.slice(-3)!=".js"&&(o+=".js"),e.require.id=i,e.require.modules[i]={},importScripts(o),e.require(r,i)},e.require.modules={},e.require.tlns={},e.define=function(t,n,r){arguments.length==2?(r=n,typeof t!="string"&&(n=t,t=e.require.id)):arguments.length==1&&(r=t,n=[],t=e.require.id);if(typeof r!="function"){e.require.modules[t]={exports:r,initialized:!0};return}n.length||(n=["require","exports","module"]);var i=function(n){return e.require(t,n)};e.require.modules[t]={exports:{},factory:function(){var e=this,t=r.apply(this,n.slice(0,r.length).map(function(t){switch(t){case"require":return i;case"exports":return e.exports;case"module":return e;default:return i(t)}}));return t&&(e.exports=t),e}}},e.define.amd={},require.tlns={},e.initBaseUrls=function(t){for(var n in t)require.tlns[n]=t[n]},e.initSender=function(){var n=e.require("ace/lib/event_emitter").EventEmitter,r=e.require("ace/lib/oop"),i=function(){};return function(){r.implement(this,n),this.callback=function(e,t){postMessage({type:"call",id:t,data:e})},this.emit=function(e,t){postMessage({type:"event",name:e,data:t})}}.call(i.prototype),new i};var n=e.main=null,r=e.sender=null;e.onmessage=function(t){var i=t.data;if(i.event&&r)r._signal(i.event,i.data);else if(i.command)if(n[i.command])n[i.command].apply(n,i.args);else{if(!e[i.command])throw new Error("Unknown command:"+i.command);e[i.command].apply(e,i.args)}else if(i.init){e.initBaseUrls(i.tlns),r=e.sender=e.initSender();var s=require(i.module)[i.classname];n=e.main=new s(r)}}}(this),ace.define("ace/lib/oop",[],function(e,t,n){"use strict";t.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(e,t){for(var n in t)e[n]=t[n];return e},t.implement=function(e,n){t.mixin(e,n)}}),ace.define("ace/range",[],function(e,t,n){"use strict";var r=function(e,t){return e.row-t.row||e.column-t.column},i=function(e,t,n,r){this.start={row:e,column:t},this.end={row:n,column:r}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return this.compare(e,t)==0},this.compareRange=function(e){var t,n=e.end,r=e.start;return t=this.compare(n.row,n.column),t==1?(t=this.compare(r.row,r.column),t==1?2:t==0?1:0):t==-1?-2:(t=this.compare(r.row,r.column),t==-1?-1:t==1?42:0)},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return this.comparePoint(e.start)==0&&this.comparePoint(e.end)==0},this.intersects=function(e){var t=this.compareRange(e);return t==-1||t==0||t==1},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){typeof e=="object"?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){typeof e=="object"?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return this.compare(e,t)==0?this.isEnd(e,t)||this.isStart(e,t)?!1:!0:!1},this.insideStart=function(e,t){return this.compare(e,t)==0?this.isEnd(e,t)?!1:!0:!1},this.insideEnd=function(e,t){return this.compare(e,t)==0?this.isStart(e,t)?!1:!0:!1},this.compare=function(e,t){return!this.isMultiLine()&&e===this.start.row?t<this.start.column?-1:t>this.end.column?1:0:e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var n={row:t+1,column:0};else if(this.end.row<e)var n={row:e,column:0};if(this.start.row>t)var r={row:t+1,column:0};else if(this.start.row<e)var r={row:e,column:0};return i.fromPoints(r||this.start,n||this.end)},this.extend=function(e,t){var n=this.compare(e,t);if(n==0)return this;if(n==-1)var r={row:e,column:t};else var s={row:e,column:t};return i.fromPoints(r||this.start,s||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return i.fromPoints(this.start,this.end)},this.collapseRows=function(){return this.end.column==0?new i(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new i(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),n=e.documentToScreenPosition(this.end);return new i(t.row,t.column,n.row,n.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}).call(i.prototype),i.fromPoints=function(e,t){return new i(e.row,e.column,t.row,t.column)},i.comparePoints=r,i.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=i}),ace.define("ace/apply_delta",[],function(e,t,n){"use strict";function r(e,t){throw console.log("Invalid Delta:",e),"Invalid Delta: "+t}function i(e,t){return t.row>=0&&t.row<e.length&&t.column>=0&&t.column<=e[t.row].length}function s(e,t){t.action!="insert"&&t.action!="remove"&&r(t,"delta.action must be 'insert' or 'remove'"),t.lines instanceof Array||r(t,"delta.lines must be an Array"),(!t.start||!t.end)&&r(t,"delta.start/end must be an present");var n=t.start;i(e,t.start)||r(t,"delta.start must be contained in document");var s=t.end;t.action=="remove"&&!i(e,s)&&r(t,"delta.end must contained in document for 'remove' actions");var o=s.row-n.row,u=s.column-(o==0?n.column:0);(o!=t.lines.length-1||t.lines[o].length!=u)&&r(t,"delta.range must match delta lines")}t.applyDelta=function(e,t,n){var r=t.start.row,i=t.start.column,s=e[r]||"";switch(t.action){case"insert":var o=t.lines;if(o.length===1)e[r]=s.substring(0,i)+t.lines[0]+s.substring(i);else{var u=[r,1].concat(t.lines);e.splice.apply(e,u),e[r]=s.substring(0,i)+e[r],e[r+t.lines.length-1]+=s.substring(i)}break;case"remove":var a=t.end.column,f=t.end.row;r===f?e[r]=s.substring(0,i)+s.substring(a):e.splice(r,f-r+1,s.substring(0,i)+e[f].substring(a))}}}),ace.define("ace/lib/event_emitter",[],function(e,t,n){"use strict";var r={},i=function(){this.propagationStopped=!0},s=function(){this.defaultPrevented=!0};r._emit=r._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var n=this._eventRegistry[e]||[],r=this._defaultHandlers[e];if(!n.length&&!r)return;if(typeof t!="object"||!t)t={};t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=i),t.preventDefault||(t.preventDefault=s),n=n.slice();for(var o=0;o<n.length;o++){n[o](t,this);if(t.propagationStopped)break}if(r&&!t.defaultPrevented)return r(t,this)},r._signal=function(e,t){var n=(this._eventRegistry||{})[e];if(!n)return;n=n.slice();for(var r=0;r<n.length;r++)n[r](t,this)},r.once=function(e,t){var n=this;this.on(e,function r(){n.off(e,r),t.apply(null,arguments)});if(!t)return new Promise(function(e){t=e})},r.setDefaultHandler=function(e,t){var n=this._defaultHandlers;n||(n=this._defaultHandlers={_disabled_:{}});if(n[e]){var r=n[e],i=n._disabled_[e];i||(n._disabled_[e]=i=[]),i.push(r);var s=i.indexOf(t);s!=-1&&i.splice(s,1)}n[e]=t},r.removeDefaultHandler=function(e,t){var n=this._defaultHandlers;if(!n)return;var r=n._disabled_[e];if(n[e]==t)r&&this.setDefaultHandler(e,r.pop());else if(r){var i=r.indexOf(t);i!=-1&&r.splice(i,1)}},r.on=r.addEventListener=function(e,t,n){this._eventRegistry=this._eventRegistry||{};var r=this._eventRegistry[e];return r||(r=this._eventRegistry[e]=[]),r.indexOf(t)==-1&&r[n?"unshift":"push"](t),t},r.off=r.removeListener=r.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];if(!n)return;var r=n.indexOf(t);r!==-1&&n.splice(r,1)},r.removeAllListeners=function(e){e||(this._eventRegistry=this._defaultHandlers=undefined),this._eventRegistry&&(this._eventRegistry[e]=undefined),this._defaultHandlers&&(this._defaultHandlers[e]=undefined)},t.EventEmitter=r}),ace.define("ace/anchor",[],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./lib/event_emitter").EventEmitter,s=t.Anchor=function(e,t,n){this.$onChange=this.onChange.bind(this),this.attach(e),typeof n=="undefined"?this.setPosition(t.row,t.column):this.setPosition(t,n)};(function(){function e(e,t,n){var r=n?e.column<=t.column:e.column<t.column;return e.row<t.row||e.row==t.row&&r}function t(t,n,r){var i=t.action=="insert",s=(i?1:-1)*(t.end.row-t.start.row),o=(i?1:-1)*(t.end.column-t.start.column),u=t.start,a=i?u:t.end;return e(n,u,r)?{row:n.row,column:n.column}:e(a,n,!r)?{row:n.row+s,column:n.column+(n.row==a.row?o:0)}:{row:u.row,column:u.column}}r.implement(this,i),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(e){if(e.start.row==e.end.row&&e.start.row!=this.row)return;if(e.start.row>this.row)return;var n=t(e,{row:this.row,column:this.column},this.$insertRight);this.setPosition(n.row,n.column,!0)},this.setPosition=function(e,t,n){var r;n?r={row:e,column:t}:r=this.$clipPositionToDocument(e,t);if(this.row==r.row&&this.column==r.column)return;var i={row:this.row,column:this.column};this.row=r.row,this.column=r.column,this._signal("change",{old:i,value:r})},this.detach=function(){this.document.off("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var n={};return e>=this.document.getLength()?(n.row=Math.max(0,this.document.getLength()-1),n.column=this.document.getLine(n.row).length):e<0?(n.row=0,n.column=0):(n.row=e,n.column=Math.min(this.document.getLine(n.row).length,Math.max(0,t))),t<0&&(n.column=0),n}}).call(s.prototype)}),ace.define("ace/document",[],function(e,t,n){"use strict";var r=e("./lib/oop"),i=e("./apply_delta").applyDelta,s=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,u=e("./anchor").Anchor,a=function(e){this.$lines=[""],e.length===0?this.$lines=[""]:Array.isArray(e)?this.insertMergedLines({row:0,column:0},e):this.insert({row:0,column:0},e)};(function(){r.implement(this,s),this.setValue=function(e){var t=this.getLength()-1;this.remove(new o(0,0,t,this.getLine(t).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new u(this,e,t)},"aaa".split(/a/).length===0?this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(e){if(this.$newLineMode===e)return;this.$newLineMode=e,this._signal("changeNewLineMode")},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return e=="\r\n"||e=="\r"||e=="\n"},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){return this.getLinesForRange(e).join(this.getNewLineCharacter())},this.getLinesForRange=function(e){var t;if(e.start.row===e.end.row)t=[this.getLine(e.start.row).substring(e.start.column,e.end.column)];else{t=this.getLines(e.start.row,e.end.row),t[0]=(t[0]||"").substring(e.start.column);var n=t.length-1;e.end.row-e.start.row==n&&(t[n]=t[n].substring(0,e.end.column))}return t},this.insertLines=function(e,t){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(e,t)},this.removeLines=function(e,t){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(e,t)},this.insertNewLine=function(e){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(e,["",""])},this.insert=function(e,t){return this.getLength()<=1&&this.$detectNewLine(t),this.insertMergedLines(e,this.$split(t))},this.insertInLine=function(e,t){var n=this.clippedPos(e.row,e.column),r=this.pos(e.row,e.column+t.length);return this.applyDelta({start:n,end:r,action:"insert",lines:[t]},!0),this.clonePos(r)},this.clippedPos=function(e,t){var n=this.getLength();e===undefined?e=n:e<0?e=0:e>=n&&(e=n-1,t=undefined);var r=this.getLine(e);return t==undefined&&(t=r.length),t=Math.min(Math.max(t,0),r.length),{row:e,column:t}},this.clonePos=function(e){return{row:e.row,column:e.column}},this.pos=function(e,t){return{row:e,column:t}},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):(e.row=Math.max(0,e.row),e.column=Math.min(Math.max(e.column,0),this.getLine(e.row).length)),e},this.insertFullLines=function(e,t){e=Math.min(Math.max(e,0),this.getLength());var n=0;e<this.getLength()?(t=t.concat([""]),n=0):(t=[""].concat(t),e--,n=this.$lines[e].length),this.insertMergedLines({row:e,column:n},t)},this.insertMergedLines=function(e,t){var n=this.clippedPos(e.row,e.column),r={row:n.row+t.length-1,column:(t.length==1?n.column:0)+t[t.length-1].length};return this.applyDelta({start:n,end:r,action:"insert",lines:t}),this.clonePos(r)},this.remove=function(e){var t=this.clippedPos(e.start.row,e.start.column),n=this.clippedPos(e.end.row,e.end.column);return this.applyDelta({start:t,end:n,action:"remove",lines:this.getLinesForRange({start:t,end:n})}),this.clonePos(t)},this.removeInLine=function(e,t,n){var r=this.clippedPos(e,t),i=this.clippedPos(e,n);return this.applyDelta({start:r,end:i,action:"remove",lines:this.getLinesForRange({start:r,end:i})},!0),this.clonePos(r)},this.removeFullLines=function(e,t){e=Math.min(Math.max(0,e),this.getLength()-1),t=Math.min(Math.max(0,t),this.getLength()-1);var n=t==this.getLength()-1&&e>0,r=t<this.getLength()-1,i=n?e-1:e,s=n?this.getLine(i).length:0,u=r?t+1:t,a=r?0:this.getLine(u).length,f=new o(i,s,u,a),l=this.$lines.slice(e,t+1);return this.applyDelta({start:f.start,end:f.end,action:"remove",lines:this.getLinesForRange(f)}),l},this.removeNewLine=function(e){e<this.getLength()-1&&e>=0&&this.applyDelta({start:this.pos(e,this.getLine(e).length),end:this.pos(e+1,0),action:"remove",lines:["",""]})},this.replace=function(e,t){e instanceof o||(e=o.fromPoints(e.start,e.end));if(t.length===0&&e.isEmpty())return e.start;if(t==this.getTextRange(e))return e.end;this.remove(e);var n;return t?n=this.insert(e.start,t):n=e.start,n},this.applyDeltas=function(e){for(var t=0;t<e.length;t++)this.applyDelta(e[t])},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--)this.revertDelta(e[t])},this.applyDelta=function(e,t){var n=e.action=="insert";if(n?e.lines.length<=1&&!e.lines[0]:!o.comparePoints(e.start,e.end))return;n&&e.lines.length>2e4?this.$splitAndapplyLargeDelta(e,2e4):(i(this.$lines,e,t),this._signal("change",e))},this.$safeApplyDelta=function(e){var t=this.$lines.length;(e.action=="remove"&&e.start.row<t&&e.end.row<t||e.action=="insert"&&e.start.row<=t)&&this.applyDelta(e)},this.$splitAndapplyLargeDelta=function(e,t){var n=e.lines,r=n.length-t+1,i=e.start.row,s=e.start.column;for(var o=0,u=0;o<r;o=u){u+=t-1;var a=n.slice(o,u);a.push(""),this.applyDelta({start:this.pos(i+o,s),end:this.pos(i+u,s=0),action:e.action,lines:a},!0)}e.lines=n.slice(o),e.start.row=i+o,e.start.column=s,this.applyDelta(e,!0)},this.revertDelta=function(e){this.$safeApplyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:e.action=="insert"?"remove":"insert",lines:e.lines.slice()})},this.indexToPosition=function(e,t){var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length;for(var i=t||0,s=n.length;i<s;i++){e-=n[i].length+r;if(e<0)return{row:i,column:e+n[i].length+r}}return{row:s-1,column:e+n[s-1].length+r}},this.positionToIndex=function(e,t){var n=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,i=0,s=Math.min(e.row,n.length);for(var o=t||0;o<s;++o)i+=n[o].length+r;return i+e.column}}).call(a.prototype),t.Document=a}),ace.define("ace/lib/lang",[],function(e,t,n){"use strict";t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){var n="";while(t>0){t&1&&(n+=e);if(t>>=1)e+=e}return n};var r=/^\s\s*/,i=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(r,"")},t.stringTrimRight=function(e){return e.replace(i,"")},t.copyObject=function(e){var t={};for(var n in e)t[n]=e[n];return t},t.copyArray=function(e){var t=[];for(var n=0,r=e.length;n<r;n++)e[n]&&typeof e[n]=="object"?t[n]=this.copyObject(e[n]):t[n]=e[n];return t},t.deepCopy=function s(e){if(typeof e!="object"||!e)return e;var t;if(Array.isArray(e)){t=[];for(var n=0;n<e.length;n++)t[n]=s(e[n]);return t}if(Object.prototype.toString.call(e)!=="[object Object]")return e;t={};for(var n in e)t[n]=s(e[n]);return t},t.arrayToMap=function(e){var t={};for(var n=0;n<e.length;n++)t[e[n]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var n in e)t[n]=e[n];return t},t.arrayRemove=function(e,t){for(var n=0;n<=e.length;n++)t===e[n]&&e.splice(n,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return(""+e).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var n=[];return e.replace(t,function(e){n.push({offset:arguments[arguments.length-2],length:e.length})}),n},t.deferredCall=function(e){var t=null,n=function(){t=null,e()},r=function(e){return r.cancel(),t=setTimeout(n,e||0),r};return r.schedule=r,r.call=function(){return this.cancel(),e(),r},r.cancel=function(){return clearTimeout(t),t=null,r},r.isPending=function(){return t},r},t.delayedCall=function(e,t){var n=null,r=function(){n=null,e()},i=function(e){n==null&&(n=setTimeout(r,e||t))};return i.delay=function(e){n&&clearTimeout(n),n=setTimeout(r,e||t)},i.schedule=i,i.call=function(){this.cancel(),e()},i.cancel=function(){n&&clearTimeout(n),n=null},i.isPending=function(){return n},i}}),ace.define("ace/worker/mirror",[],function(e,t,n){"use strict";var r=e("../range").Range,i=e("../document").Document,s=e("../lib/lang"),o=t.Mirror=function(e){this.sender=e;var t=this.doc=new i(""),n=this.deferredUpdate=s.delayedCall(this.onUpdate.bind(this)),r=this;e.on("change",function(e){var i=e.data;if(i[0].start)t.applyDeltas(i);else for(var s=0;s<i.length;s+=2){if(Array.isArray(i[s+1]))var o={action:"insert",start:i[s],lines:i[s+1]};else var o={action:"remove",start:i[s],end:i[s+1]};t.applyDelta(o,!0)}if(r.$timeout)return n.schedule(r.$timeout);r.onUpdate()})};(function(){this.$timeout=500,this.setTimeout=function(e){this.$timeout=e},this.setValue=function(e){this.doc.setValue(e),this.deferredUpdate.schedule(this.$timeout)},this.getValue=function(e){this.sender.callback(this.doc.getValue(),e)},this.onUpdate=function(){},this.isPending=function(){return this.deferredUpdate.isPending()}}).call(o.prototype)}),ace.define("ace/mode/latex_worker",[],function(e,t,n){"use strict";var r=e("../lib/oop"),i=e("../worker/mirror").Mirror,s=t.LatexWorker=function(e){i.call(this,e),this.setTimeout(250)};r.inherits(s,i),function(){var e=!1;this.onUpdate=function(){if(e)return;var t=this.doc.getValue(),n=[],r=[];try{if(t){var i=S(t);n=i.errors,r=i.contexts}}catch(s){console.log(s),e=!0,this.sender.emit("fatal-error",s),n=[]}this.sender.emit("lint",{errors:n,contexts:r})}}.call(s.prototype);var o=function(e){var t=[],n=[],r=-1,i=/[\\\{\}\$\&\#\^\_\~\%]/g,s=/[^a-zA-Z]/g,o=0,u=0,a=[];a[0]=0;var f=!1,l=0,c=1e5;for(;;){l++;if(l>c)throw new Error("exceed max token count of "+c);var h=i.exec(e);if(h==null){o<e.length&&t.push([u,"Text",o,e.length]);break}if(h&&h.index<=r)throw new Error("infinite loop in parsing");r=h.index,r>o&&t.push([u,"Text",o,r]);for(var p=o;p<r;p++)e[p]==="\n"&&(u++,a[u]=p+1);var d=i.lastIndex;o=d;var v=h[0];if(v==="%"){var m=e.indexOf("\n",o);m===-1&&(m=e.length);var g=e.substring(o,m);if(g.indexOf("%novalidate")===0)return[];!f&&g.indexOf("%begin novalidate")===0?f=!0:f&&g.indexOf("%end novalidate")===0&&(f=!1),o=i.lastIndex=m+1,n.push([u,o,m]),u++,a[u]=o}else{if(f)continue;if(v==="\\"){s.lastIndex=o;var y=s.exec(e),b=y===null?o:y.index;if(b===o)t.push([u,v,r,o+1,e[o],"control-symbol"]),o=i.lastIndex=o+1,w=e[b],w==="\n"&&(u++,a[u]=b);else{t.push([u,v,r,b,e.slice(o,b)]);var w;while((w=e[b])===" "||w==="	"||w==="\r"||w==="\n")b++,w==="\n"&&(u++,a[u]=b);o=i.lastIndex=b}}else{if(!(["{","}","$","&","#","^","_","~"].indexOf(v)>-1))throw"unrecognised character "+v;t.push([u,v,r,r+1])}}}return{tokens:t,comments:n,linePosition:a,lineNumber:u,text:e}},u=function(e,t,n){var r=e.tokens,i=e.text;if(n&&n.allowStar){var s=r[t+1];if(s&&s[1]==="Text"){var o=i.substring(s[2],s[3]);o==="*"&&t++}}var u=r[t+1],a=r[t+2],f=r[t+3],l;return u&&u[1]==="\\"?(l=u[4],t+1):u&&u[1]==="{"&&a&&a[1]==="\\"&&f&&f[1]==="}"?(l=a[4],t+3):null},a=function(e,t){var n=e.tokens,r=e.text,i=n[t+1],s=n[t+2],o=n[t+3];return i&&i[1]==="\\"&&s&&s[1]==="\\"?t+2:i&&i[1]==="\\"&&s&&s[1]==="Text"&&r.substring(s[2],s[3])==="="&&o&&o[1]==="\\"?t+3:null},f=function(e,t){var n=e.tokens,r=e.text,i=n[t+1],s=n[t+2],o=n[t+3];if(i&&i[1]==="{"&&s&&s[1]==="Text"&&o&&o[1]==="}"){var u=r.substring(s[2],s[3]);return t+3}if(i&&i[1]==="{"&&s&&s[1]==="Text"){u="";for(var a=t+2,f;f=n[a];a++)if(f[1]==="Text"){var l=r.substring(f[2],f[3]);if(!l.match(/^\S*$/))break;u+=l}else{if(f[1]!=="_")break;u+="_"}return f&&f[1]==="}"?a:null}return null},l=function(e,t){var n=e.tokens,r=e.text,i="";for(var s=t+1,o;o=n[s];s++)if(o[1]==="Text"){var u=r.substring(o[2],o[3]);if(!u.match(/^\S*$/))break;i+=u}else{if(o[1]!=="_")break;i+="_"}return i.length>0?s:null},c=function(e,t){var n=e.tokens,r=e.text,i=n[t+1];if(i&&i[1]==="Text"){var s=r.substring(i[2],i[3]);if(s.match(/^\[\d+\](\[[^\]]*\])*\s*$/))return t+1}var o=0,u=n[t+1];if(!u)return null;var a=u[2];for(var f=a,l=r.length;f<l;f++){var c=r[f];u&&f>=u[2]&&(t++,u=n[t+1]),c==="["&&o++,c==="]"&&o--;if(o===0&&c==="{")return t-1;if(o>0&&(c==="\r"||c==="\n"))return null}return null},h=function(e,t){var n=e.tokens,r=e.text,i=n[t+1];if(i&&i[1]==="Text"){var s=r.substring(i[2],i[3]);if(s.match(/^(\[[^\]]*\])+\s*$/))return t+1}return null},p=function(e,t){var n=e.tokens,r=e.text,i=n[t+1];if(i&&i[1]==="Text"){var s=r.substring(i[2],i[3]);if(s.match(/^(\*)+\s*$/))return t+1}return null},d=function(e,t){var n=e.tokens,r=e.text,i=n[t],s=i[3],o="{",u=n[t+1];for(var a=s,f=r.length;a<f;a++){var l=r[a];u&&a>=u[2]&&(t++,u=n[t+1]);if(l===o)return t-1;if(l==="\r"||l==="\n")return null}return null},v=function(e,t){var n=e.tokens,r=e.text;t+=1;var i=0,s=n[t];while(s&&s[1]==="Text"){var o=s[2],u=s[3];for(var a=o;a<u;a++){var f=r[a];if(f===" "||f==="	"||f==="\r"||f==="\n")continue;return null}t++,s=n[t]}if(s&&s[1]==="{"){i++;while(i>0){t++,s=n[t];if(!s)break;s[1]==="}"&&i--,s[1]==="{"&&i++}return t}return null},m=function(e,t){var n=e.tokens,r=e.text,i=n[t],s=r.substring(i[2],i[3]),o=i[3];r[o]==="*"&&o++;var u=r[o];o++;var a=n[t+1];for(var f=o,l=r.length;f<l;f++){var c=r[f];a&&f>=a[2]&&(t++,a=n[t+1]);if(c===u)return t;if(c==="\r"||c==="\n")return null}return null},g=function(e,t){var n=e.tokens,r=e.text,i=n[t],s=r.substring(i[2],i[3]),o=i[3],u=r[o],a=u==="{"?"}":u,f=n[t+1];f&&o===f[2]&&(t++,f=n[t+1]),o++;var l=1;for(var c=o,h=r.length;l>0&&c<h;c++){var p=r[c];f&&c>=f[2]&&(t++,f=n[t+1]),p===a?l--:p===u&&l++;if(l===0)return t;if(p==="\r"||p==="\n")return null}return null},y=function(e,t){var n=e.tokens,r=e.linePosition,i=e.lineNumber,s=e.text,o=t.TokenErrorFromTo,y=t.TokenError,b=new w(e,t),E=null,S=[],x=!1,T=!1;for(var N=0,C=n.length;N<C;N++){var k=n[N],L=k[0],A=k[1],O=k[2],M=k[3],_=k[4];if(A==="{"){b.push({command:"{",token:k,mathMode:E}),S.push(E),E=null;continue}if(A==="}"){b.push({command:"}",token:k}),E=S.pop();continue}E=null;if(A==="\\")if(_==="begin"||_==="end"){var D=n[N+1],P=n[N+2],H=n[N+3];if(D&&D[1]==="{"&&P&&P[1]==="Text"&&H&&H[1]==="}"){var B=s.substring(P[2],P[3]);b.push({command:_,name:B,token:k,closeToken:H}),N+=3}else{if(D&&D[1]==="{"&&P&&P[1]==="Text"){B="";for(var j=N+2,F;F=n[j];j++)if(F[1]==="Text"){var I=s.substring(F[2],F[3]);if(!I.match(/^\S*$/))break;B+=I}else{if(F[1]!=="_")break;B+="_"}if(F&&F[1]==="}"){b.push({command:_,name:B,token:k,closeToken:H}),N=j;continue}}var q=null;if(D&&D[1]==="{"){q=D;if(P&&P[1]==="Text"){q=P.slice(),O=q[2],M=q[3];for(j=O;j<M;j++){var R=s[j];if(R===" "||R==="	"||R==="\r"||R==="\n")break}q[3]=j}}q?o(k,q,"invalid environment command "+s.substring(k[2],q[3]||q[2])):y(k,"invalid environment command")}}else if(typeof _=="string"&&_.match(/^(be|beq|beqa|bea)$/i))x=!0;else if(typeof _=="string"&&_.match(/^(ee|eeq|eeqn|eeqa|eeqan|eea)$/i))T=!0;else if(_==="newcommand"||_==="renewcommand"||_==="DeclareRobustCommand"){var U=u(e,N,{allowStar:!0});if(U===null)continue;N=U,U=c(e,N),U!==null&&(N=U),U=v(e,N),U!==null&&(N=U)}else if(_==="def"){U=u(e,N);if(U===null)continue;N=U,U=d(e,N),U!==null&&(N=U),U=v(e,N),U!==null&&(N=U)}else if(_==="let"){U=a(e,N);if(U===null)continue;N=U}else if(_==="newcolumntype"){U=f(e,N);if(U===null)continue;N=U,U=c(e,N),U!==null&&(N=U),U=v(e,N),U!==null&&(N=U)}else if(_==="newenvironment"||_==="renewenvironment"){U=f(e,N);if(U===null)continue;N=U,U=c(e,N),U!==null&&(N=U),U=v(e,N),U!==null&&(N=U),U=v(e,N),U!==null&&(N=U)}else if(_==="verb")U=m(e,N),U===null?y(k,"invalid verbatim command"):N=U;else if(_==="url")U=g(e,N),U===null?y(k,"invalid url command"):N=U;else if(_==="left"||_==="right"){var z=n[N+1];R="",z&&z[1]==="Text"?R=s.substring(z[2],z[2]+1):z&&z[1]==="\\"&&z[5]=="control-symbol"?R=z[4]:z&&z[1]==="\\"&&(R="unknown"),R===""||R!=="unknown"&&"(){}[]<>/|\\.".indexOf(R)===-1?y(k,"invalid bracket command"):(N+=1,b.push({command:_,token:k}))}else if(_==="("||_===")"||_==="["||_==="]")b.push({command:_,token:k});else if(_==="input"){U=l(e,N);if(U===null)continue;N=U}else if(_==="hbox"||_==="text"||_==="mbox"||_==="footnote"||_==="intertext"||_==="shortintertext"||_==="textnormal"||_==="reflectbox"||_==="textrm")E=!1;else if(_==="tag")U=p(e,N),U!==null&&(N=U),E=!1;else if(_==="rotatebox"||_==="scalebox"||_=="feynmandiagram"||_==="tikz")U=h(e,N),U!==null&&(N=U),U=v(e,N),U!==null&&(N=U),E=!1;else if(_==="resizebox")U=h(e,N),U!==null&&(N=U),U=v(e,N),U!==null&&(N=U),U=v(e,N),U!==null&&(N=U),E=!1;else if(_==="DeclareMathOperator")U=v(e,N),U!==null&&(N=U),U=v(e,N),U!==null&&(N=U);else if(_==="DeclarePairedDelimiter")U=v(e,N),U!==null&&(N=U),U=v(e,N),U!==null&&(N=U),U=v(e,N),U!==null&&(N=U);else if(typeof _=="string"&&_.match(/^(alpha|beta|gamma|delta|epsilon|varepsilon|zeta|eta|theta|vartheta|iota|kappa|lambda|mu|nu|xi|pi|varpi|rho|varrho|sigma|varsigma|tau|upsilon|phi|varphi|chi|psi|omega|Gamma|Delta|Theta|Lambda|Xi|Pi|Sigma|Upsilon|Phi|Psi|Omega)$/)){var W=b.getMathMode();W===null&&y(k,A+_+" must be inside math mode",{mathMode:!0})}else typeof _=="string"&&_.match(/^(chapter|section|subsection|subsubsection)$/)?(W=b.getMathMode(),W&&(y(k,A+_+" used inside math mode",{mathMode:!0}),b.resetMathMode())):typeof _=="string"&&_.match(/^[a-z]+$/)&&(E=undefined);else if(A==="$"){var X=n[N+1],V=X&&X[1]==="$";W=b.getMathMode();if(V&&(!W||W.command=="$$")){if(W&&W.command=="$$")var $=X;else var $=k;b.push({command:"$$",token:$}),N+=1}else b.push({command:"$",token:k})}else if(A==="^"||A==="_"){W=b.getMathMode();var J=b.insideGroup();W===null&&!J&&y(k,A+" must be inside math mode",{mathMode:!0})}}return x&&T&&(t.filterMath=!0),b},b=function(e){var t={children:[]},n=[t];this.openEnv=function(e){var t=this.getCurrentNode(),r={startDelimiter:e,children:[]};t.children.push(r),n.push(r)},this.closeEnv=function(e){if(n.length==1)return null;var t=n.pop();return t.endDelimiter=e,t.startDelimiter},this.getNthPreviousNode=function(e){var t=n.length-e-1;return t<0?null:n[t]},this.getCurrentNode=function(){return this.getNthPreviousNode(0)},this.getCurrentDelimiter=function(){return this.getCurrentNode().startDelimiter},this.getPreviousDelimiter=function(){var e=this.getNthPreviousNode(1);return e?e.startDelimiter:null},this.getDepth=function(){return n.length-1},this.getContexts=function(){function r(e){var t=e[0],r=e[2],i=e[3],s=r-n[t];i||(i=r+1);var o=i-n[t];return{start:{row:t,column:s},end:{row:t,column:o}}}function i(e){if(e.startDelimiter&&e.startDelimiter.mathMode){var t={type:"math",range:{start:r(e.startDelimiter.token).start}};if(e.endDelimiter){var n=e.endDelimiter.closeToken||e.endDelimiter.token;t.range.end=r(n).end}return[t]}var s=[];for(var o=0;o<e.children.length;o++){var u=e.children[o];s=s.concat(i(u))}return s}var n=e.linePosition;return i(t)}},w=function(e,t){var n=t.EnvErrorTo,r=t.EnvErrorFromTo,i=t.EnvErrorFrom,s=[],o=new b(e),u=null,a=!1,f=[];this.getDocument=function(){return o},this.push=function(e){this.setDelimiterProps(e),this.checkAndUpdateState(e),s.push(e)},this._endVerbatim=function(e){var t=o.getCurrentDelimiter();t&&t.name===e.name&&(a=!1,o.closeEnv(e),f.push({start:t.token[2],end:e.token[2]}))};var l=[];this._end=function(e){do{var t=o.getCurrentDelimiter(),i=!1,s;if(h(t,e)){o.closeEnv(e),e.command==="end"&&e.name==="document"&&!u&&(u=e);return}if(!t)u?r(u,e,"\\end{"+u.name+"} is followed by unexpected content",{errorAtStart:!0,type:"info"}):n(e,"unexpected "+v(e));else{if(l.length>0&&(s=p(l,e)>-1)){l.splice(s,1);return}var a=w(t,e);if(d(t)<d(e))o.closeEnv(),l.push(t),i=!0;else{var f=o.getPreviousDelimiter();if(f&&e.name===f.name){o.closeEnv(),o.closeEnv(e);return}l.push(t)}}}while(i===!0)};var c={"{":"}",left:"right","[":"]","(":")",$:"$",$$:"$$"},h=function(e,t){return e?t.command==="end"?e.command==="begin"&&e.name===t.name:t.command===c[e.command]?!0:!1:!1},p=function(e,t){for(var n=0,r=e.length;n<r;n++)if(h(e[n],t))return n;return-1},d=function(e){var t={"{":1,left:2,$:3,$$:4,begin:4},n={"}":1,right:2,$:3,$$:5,end:4};return e.command?t[e.command]||n[e.command]:0},v=function(e){var t={"{":"open group {","}":"close group }","[":"open display math \\[","]":"close display math \\]","(":"open inline math \\(",")":"close inline math \\)",$:"$",$$:"$$",left:"\\left",right:"\\right"};return e.command==="begin"||e.command==="end"?"\\"+e.command+"{"+e.name+"}":e.command in t?t[e.command]:e.command},m=1,g=2,y=3,w=function(e,t){if(!e)return u?r(u,t,"\\end{"+u.name+"} is followed by unexpected end group }",{errorAtStart:!0,type:"info"}):n(t,"unexpected "+v(t)),m;if(e.command==="{"&&t.command==="end")return r(e,t,"unclosed "+v(e)+" found at "+v(t),{suppressIfEditing:!0,errorAtStart:!0,type:"warning"}),g;var i=d(e),s=d(t);return s>i?r(e,t,"unclosed "+v(e)+" found at "+v(t),{suppressIfEditing:!0,errorAtStart:!0}):r(e,t,"unexpected "+v(t)+" after "+v(e)),y};this._beginMathMode=function(e){var t=this.getMathMode();t&&i(e,v(e)+" used inside existing math mode "+v(t),{suppressIfEditing:!0,errorAtStart:!0,mathMode:!0}),e.mathMode=e,o.openEnv(e)},this._toggleMathMode=function(e){var t=o.getCurrentDelimiter();if(h(t,e)){o.closeEnv(e);return}t&&t.mathMode?this._end(e):(e.mathMode=e,o.openEnv(e))},this.getMathMode=function(){var e=o.getCurrentDelimiter();return e?e.mathMode:null},this.insideGroup=function(){var e=o.getCurrentDelimiter();return e?e.command==="{":null};var E=function(){var e=o.getCurrentDelimiter();if(!e)return;var t=e.mathMode;do var n=o.closeEnv();while(n&&n!==t)};this.resetMathMode=E;var S=function(e,t){var n=null;if(t.command==="{")t.mathMode!==null?n=t.mathMode:n=e;else if(t.command==="left")e===null&&i(t,"\\left can only be used in math mode",{mathMode:!0}),n=e;else if(t.command==="begin"){var s=t.name;s&&(s.match(/^(document|figure|center|enumerate|itemize|table|abstract|proof|lemma|theorem|definition|proposition|corollary|remark|notation|thebibliography)$/)?(e&&(r(e,t,t.name+" used inside "+v(e),{suppressIfEditing:!0,errorAtStart:!0,mathMode:!0}),E()),n=null):s.match(/^(array|gathered|split|aligned|alignedat)\*?$/)?(e===null&&i(t,t.name+" not inside math mode",{mathMode:!0}),n=e):s.match(/^(math|displaymath|equation|eqnarray|multline|align|gather|flalign|alignat)\*?$/)?(e&&(r(e,t,t.name+" used inside "+v(e),{suppressIfEditing:!0,errorAtStart:!0,mathMode:!0}),E()),n=t):n=undefined)}return n};this.checkAndUpdateState=function(e){if(a){if(e.command!=="end")return;this._endVerbatim(e)}else if(e.command==="begin"||e.command==="{"||e.command==="left"){e.verbatim&&(a=!0);var t=this.getMathMode(),n=S(t,e);e.mathMode=n,o.openEnv(e)}else e.command==="end"?this._end(e):e.command==="("||e.command==="["?this._beginMathMode(e):e.command===")"||e.command==="]"?this._end(e):e.command==="}"?this._end(e):e.command==="right"?this._end(e):(e.command==="$"||e.command==="$$")&&this._toggleMathMode(e)},this.close=function(){while(o.getDepth()>0){var e=o.closeEnv();e.command==="{"?i(e,"unclosed group {",{type:"warning"}):i(e,"unclosed "+v(e))}var n=f.length,r=t.tokenErrors.length;if(n>0&&r>0)for(var s=0;s<r;s++){var u=t.tokenErrors[s],a=u.startPos,l=u.endPos;for(var c=0;c<n;c++)if(a>f[c].start&&a<f[c].end){u.ignore=!0;break}}},this.setDelimiterProps=function(e){var t=e.name;t&&t.match(/^(verbatim|boxedverbatim|lstlisting|minted|Verbatim)$/)&&(e.verbatim=!0)}},E=function(e){var t=e.text,n=e.linePosition,r=e.lineNumber,i=[],s=[];this.errors=i,this.tokenErrors=s,this.filterMath=!1,this.getErrors=function(){var e=[];for(var t=0,n=s.length;t<n;t++)s[t].ignore||e.push(s[t]);var r=e.concat(i),o=[],u=0;for(t=0,n=r.length;t<n;t++){r[t].mathMode&&u++;if(u>10)return[]}if(this.filterMath&&u>0){for(t=0,n=r.length;t<n;t++)r[t].mathMode||o.push(r[t]);return o}return r},this.TokenError=function(e,t,r){r||(r={suppressIfEditing:!0});var i=e[0],o=e[1],u=e[2],a=e[3],f=u-n[i];a||(a=u+1);var l=a-n[i];s.push({row:i,column:f,start_row:i,start_col:f,end_row:i,end_col:l,type:"error",text:t,startPos:u,endPos:a,suppressIfEditing:r.suppressIfEditing,mathMode:r.mathMode})},this.TokenErrorFromTo=function(e,t,r,i){i||(i={suppressIfEditing:!0});var o=e[0],u=e[2],a=e[3],f=t[0],l=t[2],c=t[3];c||(c=l+1);var h=u-n[o],p=c-n[f];s.push({row:o,column:h,start_row:o,start_col:h,end_row:f,end_col:p,type:"error",text:r,startPos:u,endPos:c,suppressIfEditing:i.suppressIfEditing,mathMode:i.mathMode})},this.EnvErrorFromTo=function(e,t,r,s){s||(s={});var o=e.token,u=t.closeToken||t.token,a=o[0],f=o[2],l=o[3];u||(u=o);var c=u[0],h=u[2],p=u[3];p||(p=h+1);var d=f-n[a],v=p-n[c];i.push({row:s.errorAtStart?a:c,column:s.errorAtStart?d:v,start_row:a,start_col:d,end_row:c,end_col:v,type:s.type?s.type:"error",text:r,suppressIfEditing:s.suppressIfEditing,mathMode:s.mathMode})},this.EnvErrorTo=function(e,t,r){r||(r={});var s=e.closeToken||e.token,o=s[0],u=s[1],a=s[2],f=s[3];f||(f=a+1);var l=f-n[o],c={row:o,column:l,start_row:0,start_col:0,end_row:o,end_col:l,type:r.type?r.type:"error",text:t,mathMode:r.mathMode};i.push(c)},this.EnvErrorFrom=function(e,t,s){s||(s={});var o=e.token,u=o[0],a=o[1],f=o[2],l=o[3],c=f-n[u],h=Infinity;i.push({row:u,column:c,start_row:u,start_col:c,end_row:r,end_col:h,type:s.type?s.type:"error",text:t,mathMode:s.mathMode})}},S=function(e){var t=o(e),n=new E(t),r=y(t,n);return r.close(),{errors:n.getErrors(),contexts:r.getDocument().getContexts()}}})